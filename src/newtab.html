<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>MAUZER</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Background glow */
        .glow {
            position: fixed;
            border-radius: 50%;
            filter: blur(140px);
            opacity: 0.04;
            pointer-events: none;
        }

        .glow-1 {
            top: -10%;
            left: 10%;
            width: 600px;
            height: 600px;
            background: #888;
        }

        .glow-2 {
            bottom: -10%;
            right: 10%;
            width: 600px;
            height: 600px;
            background: #aaa;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            padding: 0 24px;
            position: relative;
            z-index: 1;
        }

        /* === LOGO === */
        .logo-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 48px;
        }

        .logo {
            width: 420px;
            max-width: 80vw;
            height: auto;
            object-fit: contain;
            margin-bottom: 16px;
            filter: drop-shadow(0 0 40px rgba(255, 255, 255, 0.06));
        }



        /* === SEARCH === */
        .search-wrap {
            width: 100%;
            max-width: 700px;
            position: relative;
            margin-bottom: 56px;
            transition: transform 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .search-wrap:hover {
            transform: scale(1.02);
        }

        .search-bar {
            width: 100%;
            height: 56px;
            padding: 0 56px 0 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 28px;
            outline: none;
            color: #fff;
            font-size: 17px;
            font-family: inherit;
            transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
        }

        .search-bar:hover {
            border-color: rgba(255, 255, 255, 0.18);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2),
                0 0 15px rgba(255, 255, 255, 0.04),
                0 0 30px rgba(255, 255, 255, 0.02);
        }

        .search-bar:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(255, 255, 255, 0.06),
                0 0 40px rgba(255, 255, 255, 0.03);
        }

        /* Animated neon sweep — single flash on hover */
        .search-wrap::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 30px;
            background: linear-gradient(90deg, transparent 0%, transparent 30%, rgba(255, 255, 255, 0.6) 50%, transparent 70%, transparent 100%);
            background-size: 200% 100%;
            background-position: -100% 0;
            opacity: 0;
            z-index: -1;
            /* Mask: only border ring visible */
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            padding: 2px;
        }

        .search-wrap.neon-flash::before {
            opacity: 1;
            animation: neon-flash 2s ease-in-out forwards;
        }

        @keyframes neon-flash {
            0% {
                background-position: -100% 0;
                opacity: 0;
            }

            15% {
                opacity: 1;
            }

            85% {
                opacity: 1;
            }

            100% {
                background-position: 200% 0;
                opacity: 0;
            }
        }

        .search-bar::placeholder {
            color: rgba(255, 255, 255, 0.25);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.3);
            pointer-events: none;
        }

        /* === QUICK LINKS === */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            width: 100%;
            max-width: 700px;
        }

        .quick-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px 12px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.04);
            cursor: pointer;
            text-decoration: none;
            transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .quick-link:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.35);
        }

        .quick-link-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.06);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .quick-link-icon img {
            width: 36px;
            height: 36px;
            object-fit: contain;
            border-radius: 4px;
        }

        .quick-link-title {
            font-size: 12px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        .quick-link-add {
            border-style: dashed;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .quick-link-add .quick-link-icon {
            font-size: 28px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* === LIGHT THEME === */
        [data-theme="light"] body,
        [data-theme="light"] {
            background: #e4e4e2;
            color: rgba(0, 0, 0, 0.8);
        }

        [data-theme="light"] .glow {
            display: none;
        }

        [data-theme="light"] .logo {
            filter: invert(1) drop-shadow(0 0 20px rgba(0, 0, 0, 0.05));
        }

        [data-theme="light"] .search-bar {
            background: rgba(0, 0, 0, 0.04);
            border-color: rgba(0, 0, 0, 0.08);
            color: #222;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .search-bar:hover {
            border-color: rgba(0, 0, 0, 0.15);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .search-bar:focus {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.2);
            box-shadow: 0 4px 32px rgba(0, 0, 0, 0.1);
        }

        [data-theme="light"] .search-bar::placeholder {
            color: rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] .search-icon {
            color: rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] .quick-link {
            background: rgba(0, 0, 0, 0.03);
            border-color: rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .quick-link:hover {
            background: rgba(0, 0, 0, 0.06);
            border-color: rgba(0, 0, 0, 0.1);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .quick-link-icon {
            background: rgba(0, 0, 0, 0.05);
        }

        [data-theme="light"] .quick-link-title {
            color: rgba(0, 0, 0, 0.55);
        }
        [data-theme="light"] .quick-link-add {
            border-color: rgba(0, 0, 0, 0.15);
        }

        [data-theme="light"] .quick-link-add .quick-link-icon {
            color: rgba(0, 0, 0, 0.6);
        }

        .modal {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.25s ease, visibility 0.25s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .modal-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.55);
            backdrop-filter: blur(6px);
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .modal-card {
            position: relative;
            width: min(92vw, 420px);
            background: rgba(20, 20, 20, 0.96);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 18px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateY(8px) scale(0.98);
            transition: transform 0.25s ease, opacity 0.25s ease;
        }
        .modal.show .modal-card {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        .modal.show .modal-backdrop {
            opacity: 1;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .modal-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 12px;
        }

        .modal-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }

        .modal-input {
            height: 38px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.04);
            color: rgba(255, 255, 255, 0.95);
            padding: 0 12px;
            outline: none;
        }

        .modal-input:focus {
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.06);
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 8px;
        }

        .modal-btn {
            height: 36px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.9);
            padding: 0 14px;
            cursor: pointer;
        }

        .modal-btn.ghost {
            background: transparent;
        }

        [data-theme="light"] .modal-backdrop {
            background: rgba(0, 0, 0, 0.35);
        }

        [data-theme="light"] .modal-card {
            background: rgba(245, 245, 245, 0.98);
            border-color: rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .modal-label {
            color: rgba(0, 0, 0, 0.55);
        }

        [data-theme="light"] .modal-input {
            background: rgba(0, 0, 0, 0.04);
            border-color: rgba(0, 0, 0, 0.08);
            color: rgba(0, 0, 0, 0.9);
        }

        [data-theme="light"] .modal-btn {
            background: rgba(0, 0, 0, 0.06);
            border-color: rgba(0, 0, 0, 0.12);
            color: rgba(0, 0, 0, 0.8);
        }
    </style>
</head>

<body>
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>

    <div class="container">
        <div class="logo-block">
            <img src="../MAUZER LOGO/main.png" class="logo" alt="Mauzer">
        </div>

        <div class="search-wrap">
            <input type="text" class="search-bar" id="search-input" placeholder="Искать в интернете или ввести адрес"
                spellcheck="false" autocomplete="off" autofocus>
            <svg class="search-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round">
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
            </svg>
        </div>

        <div class="quick-links" id="quick-links"></div>
    </div>

    <div class="modal" id="add-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-card" role="dialog" aria-modal="true">
            <div class="modal-title">Добавить сайт</div>
            <div class="modal-field">
                <label class="modal-label" for="add-url">Ссылка</label>
                <input id="add-url" class="modal-input" type="text" placeholder="https://example.com" spellcheck="false" autocomplete="off">
            </div>
            <div class="modal-field">
                <label class="modal-label" for="add-title">Название</label>
                <input id="add-title" class="modal-input" type="text" placeholder="Example" spellcheck="false" autocomplete="off">
            </div>
            <div class="modal-actions">
                <button id="add-cancel" class="modal-btn ghost" type="button">Отмена</button>
                <button id="add-save" class="modal-btn" type="button">Добавить</button>
            </div>
        </div>
    </div>

    <script>
        const defaultLinks = [
            { url: 'https://www.youtube.com', title: 'YouTube' },
            { url: 'https://chatgpt.com', title: 'ChatGPT' },
        ];

        let quickLinks = [];
        const addModal = document.getElementById('add-modal');
        const addUrlInput = document.getElementById('add-url');
        const addTitleInput = document.getElementById('add-title');
        const addCancel = document.getElementById('add-cancel');
        const addSave = document.getElementById('add-save');

        function normalizeUrl(input) {
            const trimmed = input.trim();
            if (!trimmed) return null;
            if (trimmed.startsWith('http://') || trimmed.startsWith('https://')) return trimmed;
            return 'https://' + trimmed;
        }

        function filterBlocked(links) {
            const blocked = new Set(['telegram.org', 'www.telegram.org', 'google.com', 'www.google.com', 'reddit.com', 'www.reddit.com', 'twitter.com', 'www.twitter.com', 'x.com', 'www.x.com', 'github.com', 'www.github.com']);
            return links.filter(link => {
                try {
                    return !blocked.has(new URL(link.url).hostname);
                } catch (e) {
                    return true;
                }
            });
        }

        function renderLinks(links) {
            const container = document.getElementById('quick-links');
            container.innerHTML = '';
            links.forEach((link, index) => {
                const a = document.createElement('a');
                a.className = 'quick-link';
                a.href = link.url;
                const hostname = new URL(link.url).hostname;
                a.innerHTML = `
          <div class="quick-link-icon">
            <img src="https://www.google.com/s2/favicons?domain=${hostname}&sz=128" alt=""
              onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22white%22 stroke-width=%222%22><circle cx=%2212%22 cy=%2212%22 r=%2210%22/></svg>'">
          </div>
          <span class="quick-link-title">${link.title}</span>
        `;
                a.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.location.href = link.url;
                });
                a.addEventListener('contextmenu', async (e) => {
                    e.preventDefault();
                    quickLinks = quickLinks.filter((_, i) => i !== index);
                    if (window.mauzer?.quicklinks?.save) {
                        await window.mauzer.quicklinks.save(quickLinks);
                    }
                    renderLinks(quickLinks);
                });
                container.appendChild(a);
            });

            const add = document.createElement('button');
            add.type = 'button';
            add.className = 'quick-link quick-link-add';
            add.innerHTML = `
          <div class="quick-link-icon">+</div>
          <span class="quick-link-title">Добавить</span>
        `;
            add.addEventListener('click', () => {
                openAddModal();
            });
            container.appendChild(add);
        }

        async function loadLinks() {
            let links = defaultLinks;
            let saved = null;
            if (window.mauzer?.quicklinks?.get) {
                try {
                    saved = await window.mauzer.quicklinks.get();
                    if (Array.isArray(saved) && saved.length) links = saved;
                } catch (e) { }
            }
            const filtered = filterBlocked(links);
            quickLinks = filtered;
            if (saved && window.mauzer?.quicklinks?.save && filtered.length !== saved.length) {
                await window.mauzer.quicklinks.save(filtered);
            }
            renderLinks(quickLinks);
        }

        loadLinks();

        function openAddModal() {
            addUrlInput.value = '';
            addTitleInput.value = '';
            addModal.classList.add('show');
            setTimeout(() => addUrlInput.focus(), 0);
        }

        function closeAddModal() {
            addModal.classList.remove('show');
        }

        async function saveQuickLink() {
            const rawUrl = addUrlInput.value;
            const url = normalizeUrl(rawUrl);
            if (!url) {
                addUrlInput.focus();
                return;
            }
            let hostname = '';
            try { hostname = new URL(url).hostname; } catch (e) { }
            const title = (addTitleInput.value || hostname || url).trim();
            if (!title) return;
            quickLinks.push({ url, title });
            if (window.mauzer?.quicklinks?.save) {
                await window.mauzer.quicklinks.save(quickLinks);
            }
            renderLinks(quickLinks);
            closeAddModal();
        }

        addCancel.addEventListener('click', closeAddModal);
        addSave.addEventListener('click', saveQuickLink);
        addModal.addEventListener('click', (e) => {
            if (e.target === addModal || e.target.classList.contains('modal-backdrop')) closeAddModal();
        });
        addUrlInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') saveQuickLink();
        });
        addTitleInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') saveQuickLink();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && addModal.classList.contains('show')) closeAddModal();
        });

        document.getElementById('search-input').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const val = e.target.value.trim();
                if (!val) return;
                const isUrl = /^(https?:\/\/|[\w-]+\.[\w-]+)/.test(val);
                window.location.href = isUrl
                    ? (val.startsWith('http') ? val : 'https://' + val)
                    : 'https://www.google.com/search?q=' + encodeURIComponent(val);
            }
        });

        // Neon flash on hover — single sweep then fade
        const searchWrap = document.querySelector('.search-wrap');
        searchWrap.addEventListener('mouseenter', () => {
            searchWrap.classList.remove('neon-flash');
            void searchWrap.offsetWidth; // force reflow to restart animation
            searchWrap.classList.add('neon-flash');
        });
        searchWrap.addEventListener('animationend', () => {
            searchWrap.classList.remove('neon-flash');
        });

        // Apply theme from URL param
        const params = new URLSearchParams(window.location.search);
        if (params.get('theme') === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
        }
    </script>
</body>

</html>
